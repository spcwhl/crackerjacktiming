<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<meta name="description" content="nnimation preview tool">
	<title>Animation Preview</title>
	<link rel="shortcut icon" href="">
	<link rel="apple-touch-icon-precomposed" href="">
	<link rel="image_src" href="">
	<style>
		html, body {
			background: #000;
			margin: 0;
		}
		/*
		canvas {
			image-rendering: optimizeSpeed;
			image-rendering: -moz-crisp-edges;
			image-rendering: -o-crisp-edges;
			image-rendering: -webkit-optimize-contrast;
			image-rendering: optimize-contrast;
			-ms-interpolation-mode: nearest-neighbor;
		}
		*/
	</style>
</head>
<body>
	<script>
/*
Copyright Â© 2012 Lost Decade Games, LLC
Visit us on the web: http://www.lostdecadegames.com
Email us: hello@lostdecadegames.com
Follow us on Twitter: @LostDecadeGames
*/
__intl=null;
var requirejs,require,define;(function(){function J(a){return N.call(a)==="[object Function]"}function F(a){return N.call(a)==="[object Array]"}function Z(a,b,c){for(var e in b)!(e in K)&&(!(e in a)||c)&&(a[e]=b[e]);return d}function O(a,b,c){return a=Error(b+"\nhttp://requirejs.org/docs/errors.html#"+a),c&&(a.originalError=c),a}function $(a,b,c){var d,e,f;for(d=0;f=b[d];d++)f=typeof f=="string"?{name:f}:f,e=f.location,c&&(!e||e.indexOf("/")!==0&&e.indexOf(":")===-1)&&(e=c+"/"+(e||f.name)),a[f.name]={name:f.name,location:e||f.name,main:(f.main||"main").replace(ea,"").replace(aa,"")}}function U(a,b){a.holdReady?a.holdReady(b):b?a.readyWait+=1:a.ready(!0)}function fa(a){function b(a,b){var c,d;if(a&&a.charAt(0)===".")if(b){u.pkgs[b]?b=[b]:(b=b.split("/"),b=b.slice(0,b.length-1)),c=a=b.concat(a.split("/"));var e;for(d=0;e=c[d];d++)if(e===".")c.splice(d,1),d-=1;else if(e==="..")if(d!==1||c[2]!==".."&&c[0]!=="..")d>0&&(c.splice(d-1,2),d-=2);else break;d=u.pkgs[c=a[0]],a=a.join("/"),d&&a===c+"/"+d.main&&(a=c)}else a.indexOf("./")===0&&(a=a.substring(2));return a}function c(a,c){var d=a?a.indexOf("!"):-1,e=null,f=c?c.name:null,g=a,h,i;return d!==-1&&(e=a.substring(0,d),a=a.substring(d+1,a.length)),e&&(e=b(e,f)),a&&(e?h=(d=y[e])&&d.normalize?d.normalize(a,function(a){return b(a,f)}):b(a,f):(h=b(a,f),i=x[h],i||(i=s.nameToUrl(a,null,c),x[h]=i))),{prefix:e,name:h,parentMap:c,url:i,originalName:g,fullName:e?e+"!"+(h||""):h}}function e(){var a=!0,b=u.priorityWait,c,d;if(b){for(d=0;c=b[d];d++)if(!z[c]){a=!1;break}a&&delete u.priorityWait}return a}function f(a,b,c){return function(){var d=ga.call(arguments,0),e;return c&&J(e=d[d.length-1])&&(e.__requireJsBuild=!0),d.push(b),a.apply(null,d)}}function g(a,b,c){return b=f(c||s.require,a,b),Z(b,{nameToUrl:f(s.nameToUrl,a),toUrl:f(s.toUrl,a),defined:f(s.requireDefined,a),specified:f(s.requireSpecified,a),isBrowser:d.isBrowser}),b}function h(a){var b,e,f,g=a.callback,h=a.map,i=h.fullName,j=a.deps;f=a.listeners;if(g&&J(g)){if(u.catchError.define)try{e=d.execCb(i,a.callback,j,y[i])}catch(k){b=k}else e=d.execCb(i,a.callback,j,y[i]);i&&((g=a.cjsModule)&&g.exports!==void 0&&g.exports!==y[i]?e=y[i]=a.cjsModule.exports:e===void 0&&a.usingExports?e=y[i]:(y[i]=e,G[i]&&(I[i]=!0)))}else i&&(e=y[i]=g,G[i]&&(I[i]=!0));A[a.id]&&(delete A[a.id],a.isDone=!0,s.waitCount-=1,s.waitCount===0&&(B=[])),delete E[i],d.onResourceLoad&&!a.placeholder&&d.onResourceLoad(s,h,a.depArray);if(b)return e=(i?c(i).url:"")||b.fileName||b.sourceURL,f=b.moduleTree,b=O("defineerror",'Error evaluating module "'+i+'" at location "'+e+'":\n'+b+"\nfileName:"+e+"\nlineNumber: "+(b.lineNumber||b.line),b),b.moduleName=i,b.moduleTree=f,d.onError(b);for(b=0;g=f[b];b++)g(e)}function i(a,b){return function(c){a.depDone[b]||(a.depDone[b]=!0,a.deps[b]=c,a.depCount-=1,a.depCount||h(a))}}function j(a,b){var e=b.map,f=e.fullName,i=e.name,j=F[a]||(F[a]=y[a]),k;b.loading||(b.loading=!0,k=function(a){b.callback=function(){return a},h(b),z[b.id]=!0,t()},k.fromText=function(a,b){var c=P;z[a]=!1,s.scriptCount+=1,s.fake[a]=!0,c&&(P=!1),d.exec(b),c&&(P=!0),s.completeLoad(a)},f in y?k(y[f]):j.load(i,g(e.parentMap,!0,function(a,d){var f=[],g,h;for(g=0;h=a[g];g++)h=c(h,e.parentMap),a[g]=h.fullName,h.prefix||f.push(a[g]);return b.moduleDeps=(b.moduleDeps||[]).concat(f),s.require(a,d)}),k,u))}function k(a){A[a.id]||(A[a.id]=a,B.push(a),s.waitCount+=1)}function l(a){this.listeners.push(a)}function m(a,b){var d=a.fullName,e=a.prefix,f=e?F[e]||(F[e]=y[e]):null,g,i;return d&&(g=E[d]),!g&&(i=!0,g={id:(e&&!f?D++ +"__p@:":"")+(d||"__r@"+D++),map:a,depCount:0,depDone:[],depCallbacks:[],deps:[],listeners:[],add:l},w[g.id]=!0,d&&(!e||F[e]))&&(E[d]=g),e&&!f?(d=c(e),e in y&&!y[e]&&(delete y[e],delete C[d.url]),e=m(d,!0),e.add(function(){var b=c(a.originalName,a.parentMap),b=m(b,!0);g.placeholder=!0,b.add(function(a){g.callback=function(){return a},h(g)})})):i&&b&&(z[g.id]=!1,s.paused.push(g),k(g)),g}function n(a,b,d,e){var a=c(a,e),f=a.name,j=a.fullName,l=m(a),n=l.id,o=l.deps,p;if(j){if(j in y||z[n]===!0||j==="jquery"&&u.jQuery&&u.jQuery!==d().fn.jquery)return;w[n]=!0,z[n]=!0,j==="jquery"&&d&&V(d())}l.depArray=b,l.callback=d;for(d=0;d<b.length;d++)if(n=b[d])n=c(n,f?a:e),p=n.fullName,b[d]=p,p==="require"?o[d]=g(a):p==="exports"?(o[d]=y[j]={},l.usingExports=!0):p==="module"?l.cjsModule=o[d]={id:f,uri:f?s.nameToUrl(f,null,e):void 0,exports:y[j]}:!(p in y)||p in A||j in G&&!(j in G&&I[p])?(j in G&&(G[p]=!0,delete y[p],C[n.url]=!1),l.depCount+=1,l.depCallbacks[d]=i(l,d),m(n,!0).add(l.depCallbacks[d])):o[d]=y[p];l.depCount?k(l):h(l)}function o(a){n.apply(null,a)}function p(a,b){var c=a.map.fullName,d=a.depArray,e=!0,f,g,h,i;if(a.isDone||!c||!z[c])return i;if(b[c])return a;b[c]=!0;if(d){for(f=0;f<d.length;f++){g=d[f];if(!z[g]&&!ha[g]){e=!1;break}if((h=A[g])&&!h.isDone&&z[g])if(i=p(h,b))break}e||(i=void 0,delete b[c])}return i}function q(a,b){var d=a.map.fullName,e=a.depArray,f,g,h,i;if(!a.isDone&&d&&z[d]){if(d){if(b[d])return y[d];b[d]=!0}if(e)for(f=0;f<e.length;f++)if(g=e[f])if((h=c(g).prefix)&&(i=A[h])&&q(i,b),(h=A[g])&&!h.isDone&&z[g])g=q(h,b),a.depCallbacks[f](g);return y[d]}}function r(){var a=u.waitSeconds*1e3,a=a&&s.startTime+a<(new Date).getTime(),b="",c=!1,f=!1,g=[],h,i;if(!(s.pausedCount>0)){if(u.priorityWait)if(e())t();else return;for(h in z)if(!(h in K)&&(c=!0,!z[h]))if(a)b+=h+" ";else{if(f=!0,h.indexOf("!")===-1){g=[];break}(i=E[h]&&E[h].moduleDeps)&&g.push.apply(g,i)}if(c||s.waitCount){if(a&&b)return a=O("timeout","Load timeout for modules: "+b),a.requireType="timeout",a.requireModules=b,a.contextName=s.contextName,d.onError(a);if(f&&g.length)for(b=0;h=A[g[b]];b++)if(h=p(h,{})){q(h,{});break}if(!a&&(f||s.scriptCount))(H||ca)&&!W&&(W=setTimeout(function(){W=0,r()},50));else{if(s.waitCount){for(b=0;h=B[b];b++)q(h,{});s.paused.length&&t(),X<5&&(X+=1,r())}X=0,d.checkReadyState()}}}}var s,t,u={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},catchError:{}},v=[],w={require:!0,exports:!0,module:!0},x={},y={},z={},A={},B=[],C={},D=0,E={},F={},G={},I={},L=0;return V=function(a){!s.jQuery&&(a=a||(typeof jQuery!="undefined"?jQuery:null))&&(!u.jQuery||a.fn.jquery===u.jQuery)&&("holdReady"in a||"readyWait"in a)&&(s.jQuery=a,o(["jquery",[],function(){return jQuery}]),s.scriptCount)&&(U(a,!0),s.jQueryIncremented=!0)},t=function(){var a,b,c,f,g,h;s.takeGlobalQueue(),L+=1,s.scriptCount<=0&&(s.scriptCount=0);for(;v.length;){if(a=v.shift(),a[0]===null)return d.onError(O("mismatch","Mismatched anonymous define() module: "+a[a.length-1]));o(a)}if(!u.priorityWait||e())for(;s.paused.length;){g=s.paused,s.pausedCount+=g.length,s.paused=[];for(f=0;a=g[f];f++)b=a.map,c=b.url,h=b.fullName,b.prefix?j(b.prefix,a):!C[c]&&!z[h]&&(d.load(s,h,c),c.indexOf("empty:")!==0&&(C[c]=!0));s.startTime=(new Date).getTime(),s.pausedCount-=g.length}L===1&&r(),L-=1},s={contextName:a,config:u,defQueue:v,waiting:A,waitCount:0,specified:w,loaded:z,urlMap:x,urlFetched:C,scriptCount:0,defined:y,paused:[],pausedCount:0,plugins:F,needFullExec:G,fake:{},fullExec:I,managerCallbacks:E,makeModuleMap:c,normalize:b,configure:function(a){var b,c,d;a.baseUrl&&a.baseUrl.charAt(a.baseUrl.length-1)!=="/"&&(a.baseUrl+="/"),b=u.paths,d=u.pkgs,Z(u,a,!0);if(a.paths){for(c in a.paths)c in K||(b[c]=a.paths[c]);u.paths=b}if((b=a.packagePaths)||a.packages){if(b)for(c in b)c in K||$(d,b[c],c);a.packages&&$(d,a.packages),u.pkgs=d}a.priority&&(c=s.requireWait,s.requireWait=!1,t(),s.require(a.priority),t(),s.requireWait=c,u.priorityWait=a.priority),(a.deps||a.callback)&&s.require(a.deps||[],a.callback)},requireDefined:function(a,b){return c(a,b).fullName in y},requireSpecified:function(a,b){return c(a,b).fullName in w},require:function(b,e,f){if(typeof b=="string")return J(e)?d.onError(O("requireargs","Invalid require call")):d.get?d.get(s,b,e):(e=c(b,e),b=e.fullName,b in y?y[b]:d.onError(O("notloaded","Module name '"+e.fullName+"' has not been loaded yet for context: "+a)));(b&&b.length||e)&&n(null,b,e,f);if(!s.requireWait)for(;!s.scriptCount&&s.paused.length;)t();return s.require},takeGlobalQueue:function(){T.length&&(ia.apply(s.defQueue,[s.defQueue.length-1,0].concat(T)),T=[])},completeLoad:function(a){var b;for(s.takeGlobalQueue();v.length;){if(b=v.shift(),b[0]===null){b[0]=a;break}if(b[0]===a)break;o(b),b=null}b?o(b):o([a,[],a==="jquery"&&typeof jQuery!="undefined"?function(){return jQuery}:null]),d.isAsync&&(s.scriptCount-=1),t(),d.isAsync||(s.scriptCount-=1)},toUrl:function(a,b){var c=a.lastIndexOf("."),d=null;return c!==-1&&(d=a.substring(c,a.length),a=a.substring(0,c)),s.nameToUrl(a,d,b)},nameToUrl:function(a,c,e){var f,g,h,i,j=s.config,a=b(a,e&&e.fullName);if(d.jsExtRegExp.test(a))c=a+(c?c:"");else{f=j.paths,g=j.pkgs,e=a.split("/");for(i=e.length;i>0;i--){if(h=e.slice(0,i).join("/"),f[h]){e.splice(0,i,f[h]);break}if(h=g[h]){a=a===h.name?h.location+"/"+h.main:h.location,e.splice(0,i,a);break}}c=e.join("/")+(c||".js"),c=(c.charAt(0)==="/"||c.match(/^\w+:/)?"":j.baseUrl)+c}return j.urlArgs?c+((c.indexOf("?")===-1?"?":"&")+j.urlArgs):c}},s.jQueryCheck=V,s.resume=t,s}function ja(){var a,b,c;if(B&&B.readyState==="interactive")return B;a=document.getElementsByTagName("script");for(b=a.length-1;b>-1&&(c=a[b]);b--)if(c.readyState==="interactive")return B=c;return null}var ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,la=/require\(\s*["']([^'"\s]+)["']\s*\)/g,ea=/^\.\//,aa=/\.js$/,N=Object.prototype.toString,t=Array.prototype,ga=t.slice,ia=t.splice,H=typeof window!="undefined"&&!!navigator&&!!document,ca=!H&&typeof importScripts!="undefined",ma=H&&navigator.platform==="PLAYSTATION 3"?/^complete$/:/^(complete|loaded)$/,da=typeof opera!="undefined"&&opera.toString()==="[object Opera]",K={},C={},T=[],B=null,X=0,P=!1,ha={require:!0,module:!0,exports:!0},d,t={},I,x,u,D,o,v,E,A,y,V,W;if(typeof define=="undefined"){if(typeof requirejs!="undefined"){if(J(requirejs))return;t=requirejs,requirejs=void 0}typeof require!="undefined"&&!J(require)&&(t=require,require=void 0),d=requirejs=function(a,b,c){var d="_",e;return!F(a)&&typeof a!="string"&&(e=a,F(b)?(a=b,b=c):a=[]),e&&e.context&&(d=e.context),c=C[d]||(C[d]=fa(d)),e&&c.configure(e),c.require(a,b)},d.config=function(a){return d(a)},require||(require=d),d.toUrl=function(a){return C._.toUrl(a)},d.version="1.0.7",d.jsExtRegExp=/^\/|:|\?|\.js$/,x=d.s={contexts:C,skipAsync:{}};if(d.isAsync=d.isBrowser=H)if(u=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])u=x.head=D.parentNode;d.onError=function(a){throw a},d.load=function(a,b,c){d.resourcesReady(!1),a.scriptCount+=1,d.attach(c,a,b),a.jQuery&&!a.jQueryIncremented&&(U(a.jQuery,!0),a.jQueryIncremented=!0)},define=function(a,b,c){var d,e;typeof a!="string"&&(c=b,b=a,a=null),F(b)||(c=b,b=[]),!b.length&&J(c)&&c.length&&(c.toString().replace(ka,"").replace(la,function(a,c){b.push(c)}),b=(c.length===1?["require"]:["require","exports","module"]).concat(b)),P&&(d=I||ja())&&(a||(a=d.getAttribute("data-requiremodule")),e=C[d.getAttribute("data-requirecontext")]),(e?e.defQueue:T).push([a,b,c])},define.amd={multiversion:!0,plugins:!0,jQuery:!0},d.exec=function(a){return eval(a)},d.execCb=function(a,b,c,d){return b.apply(d,c)},d.addScriptToDom=function(a){I=a,D?u.insertBefore(a,D):u.appendChild(a),I=null},d.onScriptLoad=function(a){var b=a.currentTarget||a.srcElement,c;if(a.type==="load"||b&&ma.test(b.readyState))B=null,a=b.getAttribute("data-requirecontext"),c=b.getAttribute("data-requiremodule"),C[a].completeLoad(c),b.detachEvent&&!da?b.detachEvent("onreadystatechange",d.onScriptLoad):b.removeEventListener("load",d.onScriptLoad,!1)},d.attach=function(a,b,c,e,f,g){var h;return H?(e=e||d.onScriptLoad,h=b&&b.config&&b.config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),h.type=f||b&&b.config.scriptType||"text/javascript",h.charset="utf-8",h.async=!x.skipAsync[a],b&&h.setAttribute("data-requirecontext",b.contextName),h.setAttribute("data-requiremodule",c),h.attachEvent&&!da?(P=!0,g?h.onreadystatechange=function(){h.readyState==="loaded"&&(h.onreadystatechange=null,h.attachEvent("onreadystatechange",e),g(h))}:h.attachEvent("onreadystatechange",e)):h.addEventListener("load",e,!1),h.src=a,g||d.addScriptToDom(h),h):(ca&&(importScripts(a),b.completeLoad(c)),null)};if(H){o=document.getElementsByTagName("script");for(A=o.length-1;A>-1&&(v=o[A]);A--){u||(u=v.parentNode);if(E=v.getAttribute("data-main")){t.baseUrl||(o=E.split("/"),v=o.pop(),o=o.length?o.join("/")+"/":"./",t.baseUrl=o,E=v.replace(aa,"")),t.deps=t.deps?t.deps.concat(E):[E];break}}}d.checkReadyState=function(){var a=x.contexts,b;for(b in a)if(!(b in K)&&a[b].waitCount)return;d.resourcesReady(!0)},d.resourcesReady=function(a){var b,c;d.resourcesDone=a;if(d.resourcesDone)for(c in a=x.contexts,a)!(c in K)&&(b=a[c],b.jQueryIncremented)&&(U(b.jQuery,!1),b.jQueryIncremented=!1)},d.pageLoaded=function(){document.readyState!=="complete"&&(document.readyState="complete")},H&&document.addEventListener&&!document.readyState&&(document.readyState="loading",window.addEventListener("load",d.pageLoaded,!1)),d(t),d.isAsync&&typeof setTimeout!="undefined"&&(y=x.contexts[t.context||"_"],y.requireWait=!0,setTimeout(function(){y.requireWait=!1,y.scriptCount||y.resume(),d.checkReadyState()},0))}})(),define("requireLib",function(){}),define("djinn/Class",[],function(){var a=!1,b=/\b_super\b/,c=function(){};return c.extend=function(c){var d=this.prototype;a=!0;var e=new this;a=!1;for(var f in c)e[f]=typeof c[f]=="function"&&typeof d[f]=="function"&&b.test(c[f])?function(a,b){return function(){var c=this._super;this._super=d[a];var e=b.apply(this,arguments);return this._super=c,e}}(f,c[f]):c[f];var g=function(){!a&&this.init&&this.init.apply(this,arguments)};return g.prototype=e,g.prototype.constructor=g,g.extend=arguments.callee,g},c}),define("djinn/Emitter",["djinn/Class"],function(a){return a.extend({init:function(a){var a=a||{};this._listenerKey=0,this._listeners={},this.key=a.key||"default",this._properties={};var b=localStorage.getItem(this.key);b===null?localStorage.setItem(this.key,"{}"):this._properties=JSON.parse(b)},getData:function(a,b){return a in this._properties?this._properties[a]:b},setAttributes:function(a){for(key in a)this[key]=a[key];return this},setData:function(a,b){this._properties[a]=b,localStorage.setItem(this.key,JSON.stringify(this._properties)),this.fire("changed:"+a,[b])},fire:function(a,b){for(var c in this._listeners){var d=this._listeners[c];if(d.eventName==a)if(d.method)d.method.apply(d.context,b);else if(d.methodName){var e=d.context[d.methodName];if(typeof e=="function")e.apply(d.context,b);else throw"Could not find method: "+d.methodName}}},on:function(a){var b={eventName:a};if(arguments.length==2)b.method=arguments[1];else{b.context=arguments[1];var c=arguments[2];typeof c=="string"?b.methodName=c:b.method=c}return this._listeners[++this._listenerKey]=b,this},off:function(a){var b=null;for(var c in this._listeners){var d=this._listeners[c];if(d.eventName==a)if(arguments.length==2){if(d.method==arguments[1]){b=c;break}}else{var e=arguments[1];if(e==d.context){var f=arguments[2];if(typeof f=="string"){if(f==d.methodName){b=c;break}}else{d.method=f;if(f==d.method){b=c;break}}}}}return b!==null&&delete this._listeners[b],this},remove:function(){this._listeners=null}})}),define("djinn/globalTimer",["djinn/Emitter"],function(a){var b=1e3,c=10,d=a.extend({init:function(a){this._super(a),this.running=!1,this._lastUpdate=0,this._tickHistory=[],this._timers=[],this.__defineGetter__("fps",function(){var a=0;for(var b=0,c=this._tickHistory.length;b<c;++b)a+=this._tickHistory[b];var d=a/c;return Math.floor(1e3/d)})},start:function(){this.running=!0,this._lastUpdate=Date.now(),this._requestFrame()},stop:function(){this.running=!1},schedule:function(a,b){this._timers.push({callback:a,target:Date.now()+b})},_requestFrame:function(){this.running&&requestAnimationFrame(bind(this,"_update"))},_update:function(a){var c=a-this._lastUpdate;c>b&&(console.warn("Dropping large tick: "+c),c=1),this._recordTick(c),this.fire("tick",[c]),this._updateTimers(a),this._lastUpdate=a,this._requestFrame()},_updateTimers:function(a){var b=[];for(var c=0,d=this._timers.length;c<d;++c){var e=this._timers[c];e.expired!==!0&&a>=e.target&&(e.expired=!0,e.callback(),b.push(c))}for(var c=0,d=b.length;c<d;++c)this._timers.splice(b[c],1)},_recordTick:function(a){var b=this._tickHistory.push(a);b>c&&this._tickHistory.splice(0,b-c)}});return new d}),define("djinn/client",["djinn/Emitter"],function(a){var b=a.extend({init:function(a){this._super(a);var b=navigator.userAgent;this.pixelRatio=window.devicePixelRatio||1,this.isTouch=typeof window.ontouchstart!="undefined",this.isIPhone=/iPhone OS/.test(b),this.isIPad=/iPad/.test(b),this.isIOS=this.isIPhone||this.isIPad,this.isAndroid=/Android/.test(b),this.isFullScreen=window.navigator.standalone===!0,this.__defineGetter__("orientation",function(){switch(window.orientation){case 0:return"portrait";case-90:case 90:return"landscape";default:return this.width>this.height?"landscape":"portrait"}}),this._cacheDimensions(),this._updateSize();if(this.isTouch){var c=bind(this,function(a){a.preventDefault(),this._hideAddressBar()}),d=["touchstart","touchmove","touchend"];for(var e=0,f=d.length;e<f;++e)addEventListener(d[e],c,!1)}addEventListener("load",bind(this,"_load"),!1),addEventListener("resize",bind(this,"_resize"),!1),addEventListener("orientationchange",bind(this,"_resize"),!1),setInterval(bind(this,"_resize"),2e3)},_load:function(){this._hideAddressBar()},_cacheDimensions:function(){this._dimensions={orientation:window.orientation,width:window.innerWidth,height:window.innerHeight}},_haveDimensionsChanged:function(){var a=this._dimensions;return a.orientation!=window.orientation||a.width!=window.innerWidth||a.height!=window.innerHeight},_updateSize:function(){this.isTouch&&(this.isAndroid||this.isIPhone)?(this.width=window.innerWidth,this.isAndroid?(document.body.style.height=window.innerHeight+"px",this.height=window.outerHeight/this.pixelRatio,document.body.style.height=this.height+"px"):this.isIPhone&&(this.height=window.screen.height),this.height-=this._getChromeHeight()):(this.width=window.innerWidth,this.height=window.innerHeight),logger.info("Client size: "+this.width+"x"+this.height)},_getChromeHeight:function(){var a=0;return this.isIPhone&&(a+=20,this.isFullScreen||(a+=this.orientation=="portrait"?44:32)),a},_hideAddressBar:function(){this.isTouch&&setTimeout(function(){window.scrollTo(0,1)},1)},_resize:function(){this._haveDimensionsChanged()&&(logger.info(["_resize",this.orientation,window.innerWidth+"x"+window.innerHeight].join(", ")),this._cacheDimensions(),this._updateSize(),this._hideAddressBar(),this.fire("orientationChange"))}});return new b}),define("djinn/stage",["djinn/Emitter","djinn/client"],function(a,b){var c=null,d=null,e=1,f=[],g={x:0,y:0},h=!1,i=["touchstart","touchmove","touchend"],j=["mousedown","mousemove","mouseup"],k=a.extend({setup:function(a,e){c=document.createElement("canvas"),c.width=a,c.height=e,c.style.position="absolute",c.style.left=0,c.style.top=0,this._initInput(),this._autoSize(),document.body.appendChild(c),b._hideAddressBar(),d=c.getContext("2d"),b.on("orientationChange",this,"_autoSize")},localizePoint:function(a,b){return{x:Math.round((a-c.offsetLeft)*(1/e)),y:Math.round((b-c.offsetTop)*(1/e))}},renderView:function(a,b){b&&d.clearRect(0,0,c.width,c.height),a.preRender(d)},createBuffer:function(a,b){var c=document.createElement("canvas");return c.width=Number(a),c.height=Number(b),c.style.display="none",c},getInputEvents:function(){var a=f;return f=[],a},_getEventType:function(a){switch(a.type){case"touchstart":case"mousedown":return"inputStart";case"touchmove":case"mousemove":return"inputMove";case"touchend":case"mouseup":return"inputEnd"}},_handleInputEvent:function(a){if(b.isTouch&&a.type=="touchend")var c=g.x,d=g.y;else if(a.touches)var c=a.touches[0].pageX,d=a.touches[0].pageY;else var c=a.pageX,d=a.pageY;g.x=c,g.y=d,f.push({type:this._getEventType(a),point:this.localizePoint(c,d)}),!h&&this.fire("initialInput"),h=!0},_initInput:function(){var a=b.isTouch?i:j;for(var d=0,e=a.length;d<e;++d)c.addEventListener(a[d],bind(this,"_handleInputEvent"),!1)},_autoSize:function(){e=Math.min(b.width/c.width,b.height/c.height),logger.info("Canvas scale: "+e);if(b.isIOS){logger.info("Using 3D scaling");var a="scale3d("+e+", "+e+", 1)"}else var a="scale("+e+")";c.style.webkitTransformOrigin="0 0",c.style.webkitTransform=a,c.style.MozTransformOrigin="0 0",c.style.MozTransform=a,c.style.left=b.width/2-c.width*e/2+"px",c.style.top=b.height/2-c.height*e/2+"px"}});return new k}),define("djinn/utils/transitions",[],function(){var a={linear:function(a,b,c,d){return c*a/d+b},easeIn:function(a,b,c,d){return c*(a/=d)*a+b},easeOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeBoth:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b},inStrong:function(a,b,c,d){return c*(a/=d)*a*a*a+b},outStrong:function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},bothStrong:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a*a*a+b:-c/2*((a-=2)*a*a*a-2)+b},elasticIn:function(a,b,c,d,e,f){if(a==0)return b;if((a/=d)==1)return b+c;f||(f=d*.3);if(!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return-(e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f))+b},elasticOut:function(a,b,c,d,e,f){if(a==0)return b;if((a/=d)==1)return b+c;f||(f=d*.3);if(!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return e*Math.pow(2,-10*a)*Math.sin((a*d-g)*2*Math.PI/f)+c+b},elasticBoth:function(a,b,c,d,e,f){if(a==0)return b;if((a/=d/2)==2)return b+c;f||(f=d*.3*1.5);if(!e||e<Math.abs(c)){e=c;var g=f/4}else var g=f/(2*Math.PI)*Math.asin(c/e);return a<1?-0.5*e*Math.pow(2,10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f)+b:e*Math.pow(2,-10*(a-=1))*Math.sin((a*d-g)*2*Math.PI/f)*.5+c+b},backIn:function(a,b,c,d,e){return e===undefined&&(e=1.70158),c*(a/=d)*a*((e+1)*a-e)+b},backOut:function(a,b,c,d,e){return e===undefined&&(e=1.70158),c*((a=a/d-1)*a*((e+1)*a+e)+1)+b},backBoth:function(a,b,c,d,e){return e===undefined&&(e=1.70158),(a/=d/2)<1?c/2*a*a*(((e*=1.525)+1)*a-e)+b:c/2*((a-=2)*a*(((e*=1.525)+1)*a+e)+2)+b},bounceIn:function(b,c,d,e){return d-a.bounceOut(e-b,0,d,e)+c},bounceOut:function(a,b,c,d){return(a/=d)<1/2.75?c*7.5625*a*a+b:a<2/2.75?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:a<2.5/2.75?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b},bounceBoth:function(b,c,d,e){return b<e/2?a.bounceIn(b*2,0,d,e)*.5+c:a.bounceOut(b*2-e,0,d,e)*.5+d*.5+c}};return a}),define("djinn/math/core",{random:function(a,b){return a instanceof Array?arguments.callee(0,a.length-1):Math.round(Math.random()*(b-a))+a},clamp:function(a,b,c){return Math.min(Math.max(a,b),c)},intersects:function(a,b){return a.x<b.x+b.width&&b.x<a.x+a.width&&a.y<b.y+b.height&&b.y<a.y+a.height},pointInRect:function(a,b){return a.x>b.x&&a.y>b.y&&a.x<b.x+b.width&&a.y<b.y+b.height}}),define("djinn/Timer",["djinn/Emitter","djinn/globalTimer"],function(a,b){return a.extend({init:function(a){this._super(),this._elapsed=0,this._loops=0,this._running=!1,this._tickHost=b,typeof a=="number"?this.interval=a:typeof a=="object"?(this.interval=Number(a.interval||1e3),this._tickHost=a.tickHost||this._tickHost):this.interval=1e3,this.__defineGetter__("elapsed",function(){return this._elapsed}),this.__defineGetter__("percentComplete",function(){return this._elapsed/this.interval*100}),this.__defineGetter__("running",function(){return this._running}),this.__defineSetter__("running",function(a){a?this.start():this.stop()})},reset:function(){this.start()},start:function(a){return a!==undefined&&(this.interval=a),this._elapsed=0,this._running||(this._tickHost.on("tick",this,"_update"),this._running=!0),this},stop:function(){return this._running&&(this._tickHost.off("tick",this,"_update"),this._running=!1),this},reset:function(){this.start()},_update:function(a){this._elapsed+=a,this._elapsed>=this.interval&&(this._elapsed=0,++this._loops,this.fire("elapsed",[this._loops]))}})}),define("djinn/XHR",[],function(){return function(a,b,c,d){var c=c||{},e="",f=new XMLHttpRequest;f.open(a,b,!0);if(a.toUpperCase()=="POST"){for(var g in d)if(typeof d[g]=="object"&&d[g].length)for(var h=0,i=d[g].length;h<i;++h)e+=sprintf("%s[]=%s&",g,encodeURIComponent(d[g][h]));else e+=sprintf("%s=%s&",g,encodeURIComponent(d[g]));f.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")}else f.setRequestHeader("Content-Type","application/x-javascript");f.onreadystatechange=function(){f.readyState==4&&(c.complete&&c.complete(f),f.status==200?c.success&&c.success(f.responseText):c.error&&c.error(f.status))},f.send(e||null)}}),define("djinn/assets",["djinn/XHR"],function(a){var b={},c={image:["png","jpg","jpeg"],audio:["mp3","ogg"],font:["ttf"],json:["json"]},d={image:function(a,b){var c=new Image;return c.onload=function(){c.ready=!0,b&&b(a,c)},c.src=a,c},audio:function(a,b){var c=new Audio;return c.addEventListener("canplay",function(){c.ready=!0,b&&b(a,c)},!1),c.src=a,c},font:function(){logger.warn("Font loading not yet implemented!")},data:function(b,c){return a("GET",b,{complete:function(a){c&&c(b,a.responseText)}}),""},json:function(a,b){var c=function(a,c){var d=JSON.parse(c);b&&b(a,d)};return d.data(a,c),{}}},e={};return e.cacheImage=function(a,c){b[a]=d.image(c)},e.load=function(a,c,f){typeof a=="string"&&(a=[a]);var g=a.length,h=0,i=function(a,d){b[a]=d,++h,f&&f(a,d,h,g),h>=g&&c&&c()};for(var j=0,k=a.length;j<k;++j){var l=a[j],m=e.inferAssetType(l),n=d[m];b[l]=n(l,i)}},e.unload=function(a){typeof a=="string"&&(a=[a]);for(var c=0,d=a.length;c<d;++c)delete b[a[c]]},e.get=function(a){return b[a]||(logger.warn("On-the-fly asset load: "+a),e.load(a)),b[a]},e.inferAssetType=function(a){var b=a.match(/\.(.+)/),d=b?b[1].toLowerCase():"";for(var e in c)if(c[e].indexOf(d)!=-1)return e;return"data"},e}),define("djinn/View",["djinn/Emitter","djinn/utils/transitions","djinn/assets","djinn/math/core","djinn/Timer"],function(a,b,c,d,e){var f=0,g=a.extend({_initGetSet:function(){this.__defineSetter__("right",function(a){this.x=a-this.width}),this.__defineGetter__("right",function(){return this.x+this.width}),this.__defineSetter__("right",function(a){this.x=a-this.width}),this.__defineSetter__("bottom",function(a){this.y=a-this.height}),this.__defineGetter__("bottom",function(){return this.y+this.height}),this.__defineSetter__("bottom",function(a){this.y=a-this.height}),this.__defineGetter__("z",function(){return this._z}),this.__defineSetter__("z",function(a){this._z=a,this.parent&&(this.parent.needsResort=!0)}),this.__defineSetter__("image",function(a){this._image=c.get(a)}),this.__defineGetter__("center",function(){return{x:this.x+this.width/2,y:this.y+this.height/2}}),this.__defineSetter__("boundingBox",function(a){this._boundingBox=a}),this.__defineGetter__("boundingBox",function(){var a=this._boundingBox;return{x:this.x+a.x,y:this.y+a.y,width:a.width,height:a.height}}),this.__defineGetter__("compositeOpacity",function(){var a=this.parent?this.parent.compositeOpacity:1;return this.opacity*a})},init:function(a){this._initGetSet();var b=++f;a=merge(a,{parent:null,id:b,tag:"View_"+b,x:0,y:0,z:1,anchorX:null,anchorY:null,boundingBox:null,debug:!1,rotation:0,clip:!1,width:0,height:0,scale:1,visible:!0,opacity:1,backgroundColor:null,image:null,imageX:0,imageY:0,captureEvents:!0,paused:!1}),a.parent&&(a.width=a.width||a.parent.width,a.height=a.height||a.parent.height),a.boundingBox==null&&(a.boundingBox={x:0,y:0,width:a.width,height:a.height}),this._super(a),this.id=a.id,this.tag=a.tag,this.x=Number(a.x),this.y=Number(a.y),this._z=Number(a.z),this.anchorX=Number(a.anchorX||a.width/2),this.anchorY=Number(a.anchorY||a.height/2),this.rotation=Number(a.rotation),this.boundingBox=a.boundingBox,this.width=Number(a.width),this.height=Number(a.height),this.scale=Number(a.scale),this.visible=Boolean(a.visible),this.opacity=Number(a.opacity),this.clip=Boolean(a.clip),this.backgroundColor=a.backgroundColor,this._image=null,this.imageX=Number(a.imageX),this.imageY=Number(a.imageY),this.captureEvents=Boolean(a.captureEvents),this.paused=Boolean(a.paused),this.debug=Boolean(a.debug),this.children=[],this._removedChildren=[],this.needsResort=!1,this._tweenQueue=[],a.image&&(this.image=a.image),a.parent&&a.parent.addChild(this)},addChild:function(a){a.parent&&a.removeFromParent(),a.parent=this,this.children.push(a),this.sortChildren()},removeChild:function(a){a.parent==this&&this._removedChildren.indexOf(a)==-1&&(a.parent=null,this._removedChildren.push(a))},removeFromParent:function(){this.parent&&this.parent.removeChild(this),this.fire("removedFromParent",[this])},sortChildren:function(){this.children.sort(function(a,b){return a.z==b.z?a.id-b.id:a.z-b.z})},show:function(){this.visible=!0},hide:function(){this.visible=!1},toggle:function(){this.visible=!this.visible},intersects:function(a){return a instanceof g?d.intersects(a.boundingBox,this.boundingBox):a.width?d.intersects(a,this.boundingBox):d.pointInRect(a,this.boundingBox)},createBoundTimer:function(a,b){var c=new e({interval:a,tickHost:this});return c.on("elapsed",this,b),c},react:function(a){var b={x:a.point.x-this.x,y:a.point.y-this.y};for(var c=this.children.length-1;c>=0;--c){var d=this.children[c];if(d.visible&&d.intersects(b)){a.point.x=b.x,a.point.y=b.y,d.react(a);if(a.cancel===!0)return}}this.captureEvents&&(a.point.x=b.x,a.point.y=b.y,this.fire(a.type,[a]))},preTick:function(a){if(this.paused)return;for(var b=0,c=this._removedChildren.length;b<c;++b){var d=this._removedChildren[b],e=this.children.indexOf(d);e!=-1?this.children.splice(e,1):logger.warn("Tried to remove non-child "+d.tag+" from "+this.tag)}this._removedChildren.splice(0,c),this.needsResort&&(this.sortChildren(),this.needsResort=!1),this._updateTween(a),this.tick&&this.tick(a),this.fire("tick",[a]);for(var b=0,c=this.children.length;b<c;++b){var d=this.children[b];if(this._removedChildren.indexOf(d)!==-1)continue;d.preTick(a)}},preRender:function(a){if(!this.visible||this.opacity<=0)return;var b=~~this.x,c=~~this.y;a.save(),a.translate(b+this.anchorX,c+this.anchorY),a.globalAlpha=this.compositeOpacity,this.rotation!=0&&a.rotate(this.rotation),this.scale!=1&&a.scale(this.scale,this.scale),a.translate(-this.anchorX,-this.anchorY),this.clip&&(a.beginPath(),a.rect(0,0,this.width,this.height),a.clip()),this.render&&this.width>0&&this.height>0&&(this.render(a),this.debug&&this._renderDebug(a));for(var d=0,e=this.children.length;d<e;++d){var f=this.children[d];if(this._removedChildren.indexOf(f)!==-1)continue;f.preRender(a)}a.restore()},render:function(a){this._image&&this._image.ready?a.drawImage(this._image,this.imageX,this.imageY,this.width,this.height,0,0,this.width,this.height):this.backgroundColor&&(a.fillStyle=this.backgroundColor,a.fillRect(0,0,this.width,this.height))},align:function(a,b,c,d){if(a!==undefined&&a!==null){switch(a){case"left":this.x=0;break;case"right":this.x=this.parent.width-this.width;break;case"center":this.x=this.parent.width/2-this.width/2}this.x+=c||0}if(b!==undefined&&b!==null){switch(b){case"top":this.y=0;break;case"bottom":this.y=this.parent.height-this.height;break;case"center":this.y=this.parent.height/2-this.height/2}this.y+=d||0}return this},centerOn:function(a){a.width=a.width||1,a.height=a.height||1;var b=a.x+a.width/2,c=a.y+a.height/2;return this.x=b-this.width/2,this.y=c-this.height/2,this},tween:function(a,c,d,e){if(a!=null)for(var f in a){var g=a[f];typeof g!="object"&&(a[f]={from:null,to:g})}return this._tweenQueue.push({properties:a,duration:isNaN(c)?1e3:c,transition:d||b.linear,callback:e||null,elapsed:0}),this},delayTween:function(a,b){return this.tween(null,a,null,b)},cancelTween:function(){return this._tweenQueue=[],this},completeTween:function(){for(var a=0,b=this._tweenQueue.length;a<b;++a){var c=this._tweenQueue[a];for(var d in c.properties)this[d]=c.properties[d].to;c.callback&&c.callback()}this._tweenQueue.splice(0,b)},_updateTween:function(a){if(this._tweenQueue.length<1)return;var b=this._tweenQueue[0];b.elapsed+=a;if(b.properties==null&&b.elapsed>=b.duration){b.callback&&b.callback(),this._tweenQueue.shift();return}var c=Math.ceil(b.duration/a),d=Math.floor(c*(b.elapsed/b.duration));if(d>=c){for(var e in b.properties)this[e]=b.properties[e].to;b.callback&&b.callback(),this._tweenQueue.shift()}else for(var e in b.properties){var f=b.properties[e];f.from==null&&(f.from=this[e]);var g=b.transition(d,f.from,f.to-f.from,c);this[e]=g}},_renderDebug:function(a){var b=this._boundingBox;a.fillStyle="rgba(255, 0, 0, 0.15)",a.fillRect(b.x,b.y,b.width,b.height),a.strokeStyle="rgb(255, 0, 0)",a.strokeRect(b.x,b.y,b.width,b.height),a.strokeStyle="rgb(0, 0, 255)",a.strokeRect(0,0,this.width,this.height)}});return g.transitions=b,g}),define("djinn/helpers/RotateDeviceView",["djinn/View"],function(a){return a.extend({init:function(b){var b=merge(b,{visible:!1,z:Infinity,backgroundColor:"rgb(255, 255, 255)"});this._super(b),this._rotateView=(new a({parent:this,width:250,height:250,image:"__rotateImage"})).align("center","center")}})}),define("djinn/Sprite",["djinn/View"],function(a){return a.extend({init:function(a){a=merge(a,{animations:{}}),this._super(a),this._animations=a.animations,this._animating=!1,this._currentAnim=null,this._frameElapsed=0,this._frameIndex=0,this._playbackRate=1;for(var b in this._animations)this._animations[b]=merge(this._animations[b],{frames:[],frameRate:12,flipHorizontal:!1,flipVertical:!1,loop:!0});this.__defineGetter__("currentAnimation",function(){return this._currentAnim}),Object.defineProperty(this,"playbackRate",{get:function(){return this._playbackRate},set:function(a){if(this._animating){var b=a/this._playbackRate;this._frameElapsed*=b}this._playbackRate=a}})},tick:function(a){if(!this._animating||!this._currentAnim)return;var b=this._animations[this._currentAnim];b===undefined&&logger.warn("Animation not defined: ",this._currentAnim),this._frameElapsed+=a;if(this._frameElapsed>=1e3/(b.frameRate*this._playbackRate)){this._frameElapsed=0,++this._frameIndex;var c=b.frames.length-1;b.loop==0&&this._frameIndex>c?--this._frameIndex:this._frameIndex>c?this._frameIndex=0:this._frameIndex==c&&(this._animating=!1,this.fire("animationEnd"))}},render:function(a){if(this._currentAnim){var b=this._animations[this._currentAnim],c=b.frames[this._frameIndex],d=c[0],e=c[1];this._image&&this._image.ready&&((b.flipHorizontal||b.flipVertical)&&a.scale(b.flipHorizontal?-1:1,b.flipVertical?-1:1),a.drawImage(this._image,d,e,this.width,this.height,0,0,this.width,this.height))}else this._super(a)},playAnimation:function(a,b){if(this._currentAnim!=a||b!==!1)this._animating=!0,this._currentAnim=a,this._frameIndex=0,this._frameElapsed=0}})}),define("djinn/TextView",["djinn/View"],function(a){var b=a.extend({init:function(a){this.__defineSetter__("text",function(a){this._rawText=String(a),this._lineBuffer=null}),this.__defineGetter__("text",function(){return this._rawText}),a=merge(a,b.defaults),a.parent&&(!a.width||a.width<1)&&(a.width=a.parent.width);if(!a.height||a.height<1)a.height=a.fontSize;this._super(a),this._lineBuffer=null,this.fontSize=Number(a.fontSize),this.fontFamily=a.fontFamily,this.color=a.color,this.shadowColor=a.shadowColor,this.strokeColor=a.strokeColor,this.strokeWidth=a.strokeWidth,this.textAlign=a.textAlign,this.verticalAlign=a.verticalAlign,this.text=a.text},render:function(a){this._super(a);if(this.text===undefined||this.text===null)return;this._lineBuffer==null&&this._bufferLines(this.text,a);var b=drawY=0;this.textAlign=="center"&&(b=this.width/2),this.textAlign=="right"&&(b=this.width),this.verticalAlign=="middle"&&(drawY=this.height/2),this._applyContextSettings(a);for(var c=0,d=this._lineBuffer.length;c<d;++c){var e=drawY+c*this.fontSize,f=this._lineBuffer[c];this.strokeColor&&this.strokeWidth?(a.lineWidth=this.strokeWidth,a.strokeStyle=this.strokeColor,a.strokeText(f,b,e)):this.shadowColor&&(a.fillStyle=this.shadowColor,a.fillText(f,b+1,e+1)),a.fillStyle=this.color,a.fillText(f,b,e)}},_applyContextSettings:function(a){a.font=this.fontSize+"px "+this.fontFamily,a.textAlign=this.textAlign,a.textBaseline=this.verticalAlign},_bufferLines:function(a,b){this._lineBuffer=[],this._applyContextSettings(b);var c=a.split(" "),d=0;for(var e=0,f=c.length;e<f;++e){var g=this._lineBuffer[d]||"",h=g.length>0?g+" "+c[e]:c[e];g.length>0&&b.measureText(h).width>this.width?(++d,this._lineBuffer[d]=c[e]):this._lineBuffer[d]=h}}});return b.defaults={fontSize:20,fontFamily:"Arial",color:"rgb(0, 0, 0)",textAlign:"left",verticalAlign:"top",text:""},b}),define("djinn/Game",["djinn/Emitter","djinn/globalTimer","djinn/client","djinn/stage","djinn/View","djinn/TextView","djinn/helpers/RotateDeviceView"],function(a,b,c,d,e,f,g){return a.extend({init:function(a){a=merge(a,{eraseBeforeRender:!1,showFPS:!1,width:c.width,height:c.height}),this._super(a),this.eraseBeforeRender=Boolean(a.eraseBeforeRender),d.setup(a.width,a.height),this.view=new e({width:a.width,height:a.height});if(djinn.manifest.orientation!="both"){this._rotateDeviceView=new g({parent:this.view});var b=bind(this,function(){djinn.manifest.orientation!=c.orientation?this._rotateDeviceView.show():this._rotateDeviceView.hide()});c.on("orientationChange",b),b()}this.__defineSetter__("showFPS",function(a){this._fpsView=this._fpsView||new f({parent:this.view,backgroundColor:"rgba(0, 0, 0, 0.5)",color:"rgb(255, 255, 255)",fontSize:16,width:80,height:20,z:Infinity}),this._fpsView.visible=a,this._showFPS=a}),this.showFPS=Boolean(a.showFPS)},run:function(){b.on("tick",this,"_update"),b.start()},stop:function(){b.stop(),b.off("tick",this)},_update:function(a){this._react(),this.view.preTick(a),this._showFPS&&(this._fpsView.text="FPS: "+b.fps),this._render()},_react:function(){var a=d.getInputEvents(),b=a.length;for(var c=0;c<b;++c)this.view.react(a[c])},_render:function(){d.renderView(this.view,this.eraseBeforeRender)}})}),define("djinn/utils/viewEffects",["djinn/math/core","djinn/utils/transitions"],function(a,b){return{burst:function(a,c,d){a.opacity=0,a.scale=.5,a.tween({opacity:1,rotation:Math.PI/2,scale:1.5},100,b.linear).tween({opacity:0},100,b.linear,function(){d&&d()})},buttonPress:function(a,c,d){a.tween({y:a.y+a.height/10},50,b.linear).tween({y:a.y},50,b.linear,d)},fadeOut:function(a,c,d){var c=c||{};a.tween({opacity:0},c.duration||1e3,b.linear,d)},fadeIn:function(a,c,d){var c=c||{};a.tween({opacity:1},c.duration||1e3,b.linear,d)},popIn:function(c,d,e){var d=d||{},f=a.random(1,2)==1?2:-2,g=a.clamp(c.x+c.width*f,0,c.parent.width-c.width),h=c.y;c.opacity=d.opacity||0,c.scale=d.scale||.5,c.y+=c.height/2,c.tween({opacity:1,scale:1,x:g,y:h},200,b.linear).tween({scale:1.25},50,b.linear).tween({scale:1},50,b.linear,e)},popOut:function(a,c,d){a.opacity=1,a.tween({scale:.75},50,b.linear).tween({opacity:0,scale:2},250,b.linear,d)},vibrate:function(b,c,d){b.completeTween();var c=c||{},e=c.iterations||10,f=(c.duration||250)/e,g=c.violence||6,h=b.x,i=b.y;for(var j=0;j<e;++j)b.tween({x:b.x+a.random(-g,g),y:b.y+a.random(-g,g)},f);b.delayTween(0,function(){b.x=h,b.y=i,d&&d()})}}}),define("js/AnimationPreview",["djinn/Game","djinn/assets","djinn/Sprite","djinn/TextView","djinn/utils/viewEffects"],function(a,b,c,d,e){return a.extend({init:function(a){this._super(a),this.view.backgroundColor="white",b.load(["media/images/seedling.png","media/images/bulb.png","media/images/berry.png"]);var f="seedling",g=100,h=100;this.sprite=(new c({parent:this.view,image:"media/images/seedling.png",x:0,y:0,width:g,height:h,animations:{"default":{frames:[[0,0]]},put:{frameRate:10,frames:[[g*4,0],[g*3,0],[g*2,0],[g,0],[0,0]],loop:!1},idle:{frameRate:12,frames:[[0,h],[g,h],[g*2,h],[g*3,h],[g*4,h]],loop:!1},grow:{frameRate:12,frames:[[0,h*2],[g,h*2],[g*2,h*2],[g*3,h*2],[g*4,h*2]],loop:!1},shrink:{frameRate:12,frames:[[g*4,h*2],[g*3,h*2],[g*2,h*2],[g,h*2],[0,h*2]],loop:!1}}})).align("center","center");var i=10,j=d.defaults.fontSize=32,k=(new d({parent:this.view,text:"Put",x:i,width:this.view.width/2})).on("inputStart",this,function(){this.sprite.completeTween(),this.sprite.opacity=0,this.sprite.playAnimation("put"),e.fadeIn(this.sprite,{duration:500*(1/this.sprite.playbackRate)})}),l=(new d({parent:this.view,text:"Idle",x:i,y:j,width:this.view.width/2})).on("inputStart",this,function(){var a=function(){this.sprite.off("animationEnd",this,a),this.sprite.playAnimation("default")};this.sprite.on("animationEnd",this,a),this.sprite.playAnimation("idle")}),m=(new d({parent:this.view,text:"Grow",x:i,y:j*2,width:this.view.width/2})).on("inputStart",this,function(){if(f=="berry")return;var a=function(){this.sprite.off("animationEnd",this,a),f=="seedling"?(f="bulb",this.sprite.image="media/images/bulb.png"):(f="berry",this.sprite.image="media/images/berry.png"),this.sprite.playAnimation("default")};this.sprite.on("animationEnd",this,a),this.sprite.playAnimation("grow")}),n=(new d({parent:this.view,text:"Shrink",x:i,y:j*3,width:this.view.width/2})).on("inputStart",this,function(){if(f=="seedling")return;f=="berry"?(f="bulb",this.sprite.image="media/images/bulb.png"):(f="seedling",this.sprite.image="media/images/seedling.png");var a=function(){this.sprite.off("animationEnd",this,a),this.sprite.playAnimation("default")};this.sprite.on("animationEnd",this,a),this.sprite.playAnimation("shrink")}),o=bind(this,function(){p.text="Rate: "+Math.round(this.sprite.playbackRate*10)/10}),p=new d({parent:this.view,color:"grey",textAlign:"right",x:-i,y:0});o();var q=(new d({parent:this.view,text:"Faster",textAlign:"right",x:-i,y:j,width:this.view.width/2})).align("right",null,-i).on("inputStart",this,bind(this,function(){this.sprite.playbackRate+=.1,o()})),r=(new d({parent:this.view,text:"Slower",textAlign:"right",x:-i,y:j*2,width:this.view.width/2})).align("right",null,-i).on("inputStart",this,bind(this,function(){this.sprite.playbackRate-=.1,o()}))}})});var djinn={version:"2.0.0",manifest:{}},bind=function(a,b){return typeof b=="string"&&(b=a[b]),function(){b.apply(a,arguments)}},merge=function(a,b){var a=a||{};for(var c in b)a.hasOwnProperty(c)||(a[c]=b[c]);return a},sprintf=function(a){for(var b=1,c=arguments.length;b<c;++b)a=a.replace(/%s/,arguments[b]);return a};if(typeof requestAnimationFrame=="undefined")var requestAnimationFrame=window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||window.webkitRequestAnimationFrame||function(a){setTimeout(function(){a(Date.now())},17)};var logger=typeof console!="undefined"?console:{error:function(){},info:function(){},log:function(){},warn:function(){}};define("djinn/global",function(){});
require(["djinn/global","djinn/assets"],function(a,b){djinn.manifest={launch:"js/AnimationPreview",title:"Animation Preview",description:"nnimation preview tool",shortName:"anipre",orientation:"both",width:400,height:300},require(["js/AnimationPreview"],function(a){var b=new a({width:400,height:300});b.run()})})</script>
	</body>
</html>